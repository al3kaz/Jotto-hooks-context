(this["webpackJsonpjotto-word-game"]=this["webpackJsonpjotto-word-game"]||[]).push([[0],{18:function(e,t,r){e.exports=r(46)},23:function(e,t,r){},46:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(15),o=r.n(s),c=(r(23),r(1)),u=r(3),l=r(4),d=r.n(l),i=r(16),m=(r(25),{getSecretWord:function(){var e=Object(i.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t("party")}catch(a){r(!0)}case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}),g=n.a.createContext("en"),p=n.a.createContext();var v={GuessedWordsProvider:function(e){var t=n.a.useState([]),r=Object(c.a)(t,2),a=r[0],s=r[1],o=n.a.useMemo((function(){return[a,s]}),[a]);return n.a.createElement(p.Provider,Object.assign({value:o},e))},useGuessedWords:function(){var e=n.a.useContext(p);if(!e)throw new Error("useGuessedWords must be used within a GuessedWordsProvider");return e}},b=n.a.createContext();var E={SuccessProvider:function(e){var t=n.a.useState(!1),r=Object(c.a)(t,2),a=r[0],s=r[1],o=n.a.useMemo((function(){return[a,s]}),[a]);return n.a.createElement(b.Provider,Object.assign({value:o},e))},useSuccess:function(){var e=n.a.useContext(b);if(!e)throw new Error("useSuccess must be used within a SuccessProvider");return e}},y=r(17),f={pl:{congrats:"Gratulacje! Zgad\u0142e\u015b s\u0142owo",submit:"Potwierd\u017a",guessPrompt:"Spr\xf3buj odgadn\u0105\u0107 tajne s\u0142owo!",guessInputPlaceholder:"zgadnij",guessColumnHeader:"S\u0142owa, kt\xf3re pr\xf3bowa\u0142e\u015b",guessedWords:"Domys\u0142y",matchingLettersColumnHeader:"Pasuj\u0105ce litery",newWord:"Nowe s\u0142owo",totalCount:"Liczba pr\xf3b",giveUp:"Poddaje si\u0119",secretWordWas:"Szukanym s\u0142owem by\u0142o",betterLuck:"Nast\u0119pnym razem Ci si\u0119 uda!",enterSecretWord:"Dodaj swoje tajne s\u0142owo",serverError:"Problem z serwerem. Spr\xf3buj p\xf3\u017aniej"},en:{congrats:"Congratulations! You guessed the word!",submit:"Submit",guessPrompt:"Try to guess the secret word!",guessInputPlaceholder:"enter guess",guessColumnHeader:"Guessed Words",guessedWords:"Guesses",matchingLettersColumnHeader:"Matching Letters",newWord:"New Word",totalCount:"Total Guesses ",giveUp:"Give Up",secretWordWas:"The secret word was",betterLuck:"Better luck next time!",enterSecretWord:"Enter your own secret word",serverError:"There was an error retrieving the secret word. Please try again later."},emoji:{congrats:"\ud83c\udfaf\ud83c\udf89",submit:"\ud83d\ude80",guessPrompt:"\ud83e\udd14\ud83e\udd2b\ud83d\udd24",guessInputPlaceholder:"\u2328\ufe0f\ud83e\udd14",guessedWords:"\ud83e\udd37\u200d\ud83d\udd24",guessColumnHeader:"\ud83e\udd37\u200d",matchingLettersColumnHeader:"\u2705",newWord:"\u2728\ud83d\udd24",totalCount:"\ud83e\uddee",giveUp:"\ud83d\ude29",secretWordWas:"\ud83e\udd2b\ud83d\udd24",betterLuck:"\ud83c\udf40\u2728\ud83d\udd24",enterSecretWord:"\ud83d\udc69\u200d\ud83d\udcbb\ud83e\udd2b\ud83d\udd24",serverError:"\ud83d\udea8. \u23f2."}};var W={getStringByLanguage:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return r[e]&&r[e][t]?r[e][t]:(console.warn("Could not get string [".concat(t,"] for [").concat(e,"]")),r.en[t])}};var S=function(e){var t=e.secretWord,r=n.a.useContext(g),a=E.useSuccess(),s=Object(c.a)(a,2),o=s[0],u=s[1],l=v.useGuessedWords(),d=Object(c.a)(l,2),i=d[0],m=d[1],p=n.a.useState(""),b=Object(c.a)(p,2),f=b[0],S=b[1];return o?null:n.a.createElement("div",{"data-test":"component-input"},n.a.createElement("form",{className:"form-inline"},n.a.createElement("input",{"data-test":"input-box",className:"mb-2 mx-sm-3 mr-1",type:"text",placeholder:W.getStringByLanguage(r,"guessInputPlaceholder"),value:f,onChange:function(e){S(e.target.value)}}),n.a.createElement("button",{"data-test":"submit-button",className:"btn btn-primary mb-2",type:"submit",onClick:function(e){e.preventDefault();var r=function(e,t){var r=t.split(""),a=new Set(e);return r.filter((function(e){return a.has(e)})).length}(f,t),a=[].concat(Object(y.a)(i),[{guessedWord:f,letterMatchCount:r}]);m(a),f===t&&u(!0),S("")}},W.getStringByLanguage(r,"submit"))))};var w=function(e){var t=e.setLanguage,r=[{code:"pl",symbole:"pl"},{code:"en",symbole:"us"},{code:"emoji",symbole:"\ud83d\ude0a"}].map((function(e){return n.a.createElement("span",{className:"btn btn-light","data-test":"language-icons",key:e.code,onClick:function(){return t(e.code)}},e.symbole)}));return n.a.createElement("div",{"data-test":"component-language-picker"},r)},h=function(){var e=E.useSuccess(),t=Object(c.a)(e,1)[0],r=n.a.useContext(g);return t?n.a.createElement("div",{"data-test":"component-congrats",className:"alert alert-success"},n.a.createElement("span",{"data-test":"congrats-message"},W.getStringByLanguage(r,"congrats"))):n.a.createElement("div",{"data-test":"component-congrats"})},C=function(){var e,t=v.useGuessedWords(),r=Object(c.a)(t,1)[0],a=n.a.useContext(g);if(0===r.length)e=n.a.createElement("span",{"data-test":"guess-instructions"},W.getStringByLanguage(a,"guessPrompt"));else{var s=r.map((function(e,t){return n.a.createElement("tr",{"data-test":"guessed-word",key:t},n.a.createElement("td",null,e.guessedWord),n.a.createElement("td",null,e.letterMatchCount))}));e=n.a.createElement("div",{"data-test":"guessed-words"},n.a.createElement("h3",null,W.getStringByLanguage(a,"guessedWords")),n.a.createElement("table",{className:"table table-sm"},n.a.createElement("thead",{className:"thead-light"},n.a.createElement("tr",null,n.a.createElement("th",null,W.getStringByLanguage(a,"guessColumnHeader")),n.a.createElement("th",null,W.getStringByLanguage(a,"matchingLettersColumnHeader")))),n.a.createElement("tbody",null,s)),n.a.createElement("div",null,W.getStringByLanguage(a,"totalCount"),":",s.length))}return n.a.createElement("div",{"data-test":"component-guessed-words"},e)},j=r(5),L=r.n(j);function x(e){var t=e.setGiveUp,r=e.setSecretWord,a=E.useSuccess(),s=Object(c.a)(a,2),o=s[0],u=s[1],l=v.useGuessedWords(),d=Object(c.a)(l,2),i=(d[0],d[1]),p=n.a.useContext(g);return o?n.a.createElement("button",{"data-test":"component-new-word-button",className:"btn btn-primary mb-2",onClick:function(){u(!1),i([]),t(!1),m.getSecretWord(r)}},W.getStringByLanguage(p,"newWord")):n.a.createElement("div",{"data-test":"component-new-word-button"})}x.propType={setSecretWord:L.a.func.isRequired,setGiveUp:L.a.func.isRequired};var O=x,P=function(e){var t=e.setGiveUp,r=n.a.useContext(g),a=E.useSuccess(),s=Object(c.a)(a,2),o=s[0],u=s[1];return o?n.a.createElement("div",{"data-test":"component-give-up-button"}):n.a.createElement("button",{"data-test":"component-give-up-button",className:"btn btn-danger mb-2",onClick:function(){t(!0),u(!0)}},W.getStringByLanguage(r,"giveUp"))};var k=function(e){var t=e.secretWord,r=n.a.useContext(g);return n.a.createElement("div",{"data-test":"component-reveal",className:"alert alert-danger"},n.a.createElement("p",null,W.getStringByLanguage(r,"secretWordWas"),' "',t,'"'),n.a.createElement("p",null,W.getStringByLanguage(r,"betterLuck")))};var G=function(e){var t=e.setEnterSecretWord,r=v.useGuessedWords(),a=Object(c.a)(r,1)[0],s=n.a.useContext(g);return a.length>0?n.a.createElement("div",{"data-test":"component-enter-secret-word-button"}):n.a.createElement("button",{"data-test":"component-enter-secret-word-button",className:"btn btn-primary mb-2",onClick:function(){return t(!0)}},W.getStringByLanguage(s,"enterSecretWord"))};var N=function(e){var t=e.setEnterSecretWord,r=e.setSecretWord,a=e.giveUp,s=n.a.useState(""),o=Object(c.a)(s,2),u=o[0],l=o[1],d=n.a.useContext(g);return n.a.createElement("div",{"data-test":"component-entry-secret-word"},n.a.createElement("form",null,n.a.createElement("input",{"data-test":"input-box",className:"mb-2 mx-sm-3",type:"text",value:u,onChange:function(e){l(e.target.value)}}),n.a.createElement("button",{"data-test":"submit-button",type:"submit",className:"btn btn-primary mb-2",onClick:function(e){if(e.preventDefault(),!u)return alert("put secret word");r(u),t(!1),l(""),a(!1)}},W.getStringByLanguage(d,"submit"))))};var B=function(){var e=n.a.useContext(g);return n.a.createElement("div",{"data-test":"component-server-error",className:"alert alert-danger"},W.getStringByLanguage(e,"serverError"))};function U(e,t){switch(t.type){case"setSecretWord":return Object(u.a)({},e,{secretWord:t.payload});case"setLanguage":return Object(u.a)({},e,{language:t.payload});case"setGiveUp":return Object(u.a)({},e,{giveUp:t.payload});case"setEnterSecretWord":return Object(u.a)({},e,{enterSecretWord:t.payload});case"setServerError":return Object(u.a)({},e,{serverError:t.payload});default:throw new Error("invalid aciotn type: ".concat(t.type))}}var H=function(){var e=n.a.useReducer(U,{secretWord:null,language:"en"}),t=Object(c.a)(e,2),r=t[0],a=t[1],s=function(e){return a({type:"setSecretWord",payload:e})},o=function(e){a({type:"setGiveUp",payload:e})},u=function(e){a({type:"setEnterSecretWord",payload:e})},l=function(e){a({type:"setServerError",payload:e})};return n.a.useEffect((function(){m.getSecretWord(s,l)}),[]),console.log(r.serverError),r.serverError?n.a.createElement(B,null):r.secretWord?n.a.createElement("div",{className:"container","data-test":"component-app"},n.a.createElement(g.Provider,{value:r.language},n.a.createElement(w,{setLanguage:function(e){a({type:"setLanguage",payload:e})}}),n.a.createElement("h1",null,"Jotto"),n.a.createElement("p",null,'"',r.secretWord,'"'),n.a.createElement(v.GuessedWordsProvider,null,r.enterSecretWord?n.a.createElement(N,{giveUp:o,setEnterSecretWord:u,setSecretWord:s}):n.a.createElement("div",null,n.a.createElement(E.SuccessProvider,null,r.giveUp?n.a.createElement(k,{secretWord:r.secretWord}):n.a.createElement(h,null),n.a.createElement(O,{setSecretWord:s,setGiveUp:o}),n.a.createElement(S,{secretWord:r.secretWord}),r.giveUp?"":n.a.createElement(P,{setGiveUp:o})),n.a.createElement(C,null),n.a.createElement(G,{setEnterSecretWord:u}))))):n.a.createElement("div",{className:"container","data-test":"component-spinner"},n.a.createElement("div",{className:"spinner-border",role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading...")),n.a.createElement("p",null,"Loading..."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.0f104632.chunk.js.map